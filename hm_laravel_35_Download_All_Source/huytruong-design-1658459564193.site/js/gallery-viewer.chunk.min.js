"use strict";(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi||[]).push([[6548],{29817:function(e,t,i){i.r(t),i.d(t,{GALLERY_CONSTS:function(){return y.Z},ItemView:function(){return h.Z},ProGallery:function(){return a.Z},ProGalleryRenderer:function(){return d},addPresetStyles:function(){return f.eg},cssScrollHelper:function(){return c.O},defaultStyles:function(){return n.Z}});var a=i(85938),s=i(31191),r=i(27762),l=i.n(r),n=i(70215),o=i(30972),p=i(56312),m=i(80168),u=function(e){function t(t){var i=e.call(this,t)||this;return i.domId=t.domId||"default-dom-id",i}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,i=e.options,a=e.styleParams,r=e.eventsListener,m=(0,s.__rest)(e,["styles","options","styleParams","eventsListener"]),u=(0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)({},n.Z),i),t),a),d=(0,s.__assign)((0,s.__assign)({},m),{styles:u,eventsListener:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof r&&r.apply(void 0,e)},domId:this.domId});return o.Z.logPlaygroundLink(d.styles),d.styles&&d.items&&d.container&&d.structure?l().createElement(p.Z,(0,s.__assign)({},d)):null},t.propTypes=m.Z,t}(l().Component),d=u,c=i(74409),h=i(20339),y=i(16930),f=i(9711)},28595:function(e,t,i){i.r(t),i.d(t,{default:function(){return D}});var a=i(66017),s=i(20011),r=i(23788),l=i(27762),n=i.n(l),o=i(50417),p=i(25114),m=i(17607),u=i(28945),d=i(23712),c=i.n(d),h=i(40841),y=i.n(h),f=(i(87308),function(e){return e.startsWith("http://")||e.startsWith("https://")}),g=function(e,t){return f(e)?e:("image"===t?(i="https://static.wixstatic.com/",a="media/"):(i="https://video.wixstatic.com/",a="video/"),i+(e.startsWith(a)?e:a+e));var i,a},b=function(e,t,i,a,s,r,l,n,o){if(void 0===l&&(l=!1),void 0===n&&(n=!1),r=r||{},-1!==(t=t||"").indexOf("base64"))return t;if(a=Math.ceil(a),s=Math.ceil(s),i===u.G.VIDEO)return g(t,u.G.VIDEO);if(a>=e.maxWidth&&s>=e.maxHeight){var p=e.dto.metaData.type===u.G.VIDEO?t:e.url;return g(p,u.G.IMAGE)}return function(e,t,i,a,s,r,l,n,o){t=t||"",(r=r||{}).quality>0&&(r.quality=Math.min(90,r.quality));var p={x:50,y:50};o&&o[0]>=0&&o[1]>=0&&(p.x=Math.round(100*o[0]),p.y=Math.round(100*o[1])),!0===r.allowUsm&&r.usm?(r.usm.usm_a=Math.min(5,Math.max(0,r.usm.usm_a||0)),r.usm.usm_r=Math.min(128,Math.max(0,r.usm.usm_r||0)),r.usm.usm_t=Math.min(1,Math.max(0,r.usm.usm_t||0))):r.usm={usm_a:0,usm_r:0,usm_t:0};var m=function(){};m="fit"===i?c().getScaleToFitImageURL:c().getScaleToFillImageURL;var u={};return r.quality>0&&(u.quality=r.quality),r.blur>0&&(u.filters={blur:r.blur}),p&&(u.focalPoint=p),r&&r.usm&&(u.unsharpMask={radius:parseFloat(r.usm.usm_r),amount:parseFloat(r.usm.usm_a),threshold:parseFloat(r.usm.usm_t)}),f(t)?t:m(t.replace("https://static.wixstatic.com/",""),e.maxWidth,e.maxHeight,a,s,u)}(e,t,i,a,s,r,0,0,o)},v={gallery_container:"_1lf3C",expandContainer:"_2trtH",itemOverlay:"_2Vr_d",expandIcon:"_1nQrL",clickableItem:"_2QozM",imageTitle:"w8o3K",imageTitleContainer:"F9_4B",pointer:"_1pMUq"},x=function(e){return n().createElement("svg",(0,s.Z)({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},e),n().createElement("path",{d:"M15.071 8.371V4.585l-4.355 4.356a.2.2 0 0 1-.283 0l-.374-.374a.2.2 0 0 1 0-.283l4.356-4.355h-3.786a.2.2 0 0 1-.2-.2V3.2c0-.11.09-.2.2-.2H16v5.371a.2.2 0 0 1-.2.2h-.529a.2.2 0 0 1-.2-.2zm-6.5 6.9v.529a.2.2 0 0 1-.2.2H3v-5.371c0-.11.09-.2.2-.2h.529c.11 0 .2.09.2.2v3.786l4.355-4.356a.2.2 0 0 1 .283 0l.374.374a.2.2 0 0 1 0 .283L4.585 15.07h3.786c.11 0 .2.09.2.2z",fill:"#000",fillRule:"nonzero"}))},S=["scrollingElement"],w=i(29817),T=w.ProGallery,_=w.GALLERY_CONSTS,E=_.events,D=function(e){function t(t){var i;return(0,o.GuS)(t.componentData,p),(i=e.call(this,t)||this).shouldUpdateDimensions=function(e){var t=e.styles.galleryLayout;return i.props.componentData.styles.galleryLayout!==t||!(0,m.isEqual)(e.config,i.props.componentData.config)||void 0},i.shouldConsiderThumbnailSize=function(){var e=i.props.componentData.styles,t=e.galleryLayout,a=e.galleryThumbnailsAlignment;return i.props.isMobile&&t===u.a.THUMBNAIL&&["top","bottom"].includes(a)},i.getGalleryHeight=function(e){var t=305;return e&&(t=i.shouldConsiderThumbnailSize()?Math.floor(2*e/3)+95:Math.floor(3*e/4)),t},i.getDimensions=function(){var e=Math.floor(i.containerRef.current.getBoundingClientRect().width);return{width:e,height:i.getGalleryHeight(e)}},i.updateDimensions=(0,m.debounce)((function(){var e,t,a=i.getDimensions(),s=a.width,r=a.height;s===(null===(e=i.state.size)||void 0===e?void 0:e.width)&&r===(null===(t=i.state.size)||void 0===t?void 0:t.height)||i.setState({size:{width:s,height:r}})}),100),i.handleGalleryEvents=function(e,t){var a=i.props.componentData.styles;switch(e){case E.GALLERY_CHANGE:i.containerRef.current&&((0,u.i)(a)?i.containerRef.current.style.height="auto":i.containerRef.current.style.height=t.layoutHeight+"px");break;case E.ITEM_ACTION_TRIGGERED:"video"!==t.type&&!t.linkData.url&&i.hasExpand()&&i.handleExpand(t)}},i.handleExpand=function(e){var t,a=i.props,s=a.settings.onExpand,r=a.helpers,l=void 0===r?{}:r;null===(t=l.onViewerAction)||void 0===t||t.call(l,u.b,"Click","expand_gallery"),i.hasExpand()&&s(i.props.blockKey,e.idx)},i.renderExpandIcon=function(e){return n().createElement("div",{className:i.styles.expandContainer},n().createElement(x,{className:i.styles.expandIcon,onClick:function(t){t.preventDefault(),t.stopPropagation(),i.handleExpand(e)}}))},i.hasExpand=function(){var e=i.props,t=e.componentData,a=e.settings,s=!1;return void 0!==t.disableExpand?s=t.disableExpand:void 0!==a.disableExpand&&(s=a.disableExpand),!s&&a.onExpand},i.renderTitle=function(e){return e?n().createElement("div",{className:v.imageTitleContainer},n().createElement("div",{className:i.styles.imageTitle},e)):null},i.hoverElement=function(e){var t,a,s=i.hasExpand()||e.link,r=y()(i.styles.itemOverlay,s&&i.styles.clickableItem);return n().createElement("div",{className:r},i.hasExpand()&&i.renderExpandIcon(e),i.renderTitle(e.title,"HOVER"),null===(t=(a=i.props).itemOverlayElement)||void 0===t?void 0:t.call(a,e))},i.getStyleParams=function(){var e=i.props,t=e.componentData,a=t.styles,r=t.disableDownload,l=e.isMobile,n=(0,s.Z)({},(0,u.g)(a.galleryLayout),{allowContextMenu:!r,showArrows:(0,u.i)(a)},a);return l&&(n.m_numberOfImagesPerRow&&(n.numberOfImagesPerRow=n.m_numberOfImagesPerRow),(0,u.i)(n)&&(n.arrowsSize=20,!a.imageMargin&&(n.imageMargin=0),n.galleryLayout===u.a.THUMBNAIL&&(n.thumbnailSize=90))),n.thumbnailSpacings&&(n.thumbnailSpacings/=2),n},i.handleContextMenu=function(e){var t=i.props.componentData.disableDownload;return void 0!==t&&t&&e.preventDefault()},i.domId=i.props.blockKey||"v-"+i.props.entityIndex,i.containerRef=n().createRef(),i.state={items:[]},i}(0,r.Z)(t,e);var i=t.prototype;return i.componentDidMount=function(){window.addEventListener("resize",this.updateDimensions),this.setState({size:this.getDimensions()}),this.initUpdateDimensionsForDomChanges()},i.initUpdateDimensionsForDomChanges=function(){var e,t,i=this,a=(null===(e=this.props)||void 0===e?void 0:e.settings).scrollingElement;a||(console.error("Please fix the gallery config of Rich Content Editor.\n        A scrollingElement needs to be provided. Without it the gallery will not work correctly"),a=document.body);var s="function"==typeof a?a():a;1!==(null===(t=s)||void 0===t?void 0:t.nodeType)&&(s=document.body),s?(this.observer=new MutationObserver((function(){s.clientHeight!==i.oldContentElementHeight&&(i.oldContentElementHeight=s.clientHeight,i.updateDimensions())})),this.observer.observe(s,{attributes:!0,childList:!0,subtree:!0})):console.warn("can't find content container to listen for changes to update gallery")},t.getDerivedStateFromProps=function(e){var t=e.componentData.items,i=e.anchorTarget,a=e.relValue,r=t||[];return r=(r=r.filter((function(e){return!e.error}))).length>0?function(e){var t=e.anchorTarget,i=e.relValue;return e.items.map((function(e,a){var r=e.metadata;if(e.metaData)return e;var l={metaData:{link:{type:"none",target:"_blank"}},directLink:{}};if(r){if(l.metaData=(0,s.Z)({},r,{link:{type:"none",target:"_blank"}}),"video"===e.metadata.type){l.metaData.link={target:"_blank",rel:"noopener",url:(0,o.D5W)(e.url||"")};var n=l.metaData.poster,p=n.pathname,m=n.thumbnail,u=(m=void 0===m?{}:m).pathname,d=m.width,c=m.height;p&&u?l.metaData.poster={url:g(u,"image"),width:d,height:c}:"string"==typeof l.metaData.poster&&(l.metaData.poster={url:l.metaData.poster,width:l.metaData.width,height:l.metaData.height})}l.metaData.alt=r.altText,e.metadata.link&&(l.metaData.link={type:"wix",target:e.metadata.link.target||t||"_self",data:{type:"ExternalLink",target:e.metadata.link.target||t||"_self",rel:e.metadata.link.rel||i||"noopener",url:(0,o.D5W)(e.metadata.link.url||"")}},l.directLink={url:(0,o.D5W)(e.metadata.link.url||""),target:e.metadata.link.target||t||"_self",rel:e.metadata.link.rel||i||"noopener"})}return(0,s.Z)({},e,{metadata:void 0},l,{itemId:(0,o.VjN)()+"_"+a.toString(),hash:e.url+"_"+a.toString()})}))}({items:r,anchorTarget:i,relValue:a}):u.s,{items:r}},i.shouldComponentUpdate=function(e,t){var i=this.props.componentData,a=i.styles,s=i.items,r=i.config,l=e.componentData,n=l.styles,o=l.items,p=l.config;return!((0,m.isEqual)(t.size,this.state.size)&&(0,m.isEqual)(n,a)&&(0,m.isEqual)(o,s)&&(0,m.isEqual)(p,r))},i.componentDidUpdate=function(e){this.shouldUpdateDimensions(e.componentData)&&this.updateDimensions()},i.componentWillUnmount=function(){this.observer.disconnect(),window.removeEventListener("resize",this.updateDimensions),this.updateDimensions.cancel()},i.render=function(){var e=this.props,t=e.theme,i=e.settings,s=e.seoMode;this.styles=this.styles||(0,o.y0G)({styles:v,theme:t});var r=i.scrollingElement,l=(0,a.Z)(i,S),p=this.state,m=p.size,u=p.items,d=this.getStyleParams(),c=s?_.viewMode.SEO:void 0;return n().createElement("div",{ref:this.containerRef,className:this.styles.gallery_container,"data-hook":"galleryViewer",role:"none",onContextMenu:this.handleContextMenu},null!=m&&m.width?n().createElement(T,{domId:this.domId,allowSSR:!!s,items:u,options:d,container:m,settings:l,scrollingElement:r,eventsListener:this.handleGalleryEvents,resizeMediaUrl:b,viewMode:c,customHoverRenderer:this.hoverElement}):null)},t}(n().Component)},25114:function(e){e.exports=JSON.parse('{"$id":"https://wix-rich-content/gallery-content-data-schema.json","type":"object","properties":{"items":{"$id":"/properties/items","type":"array","items":{"$id":"/properties/items/items","type":"object","properties":{"metadata":{"$id":"/properties/items/items/properties/metadata","type":"object","properties":{"height":{"$id":"/properties/items/items/properties/metadata/properties/height","type":"integer","title":"The Height Schema ","default":0,"examples":[3744]},"width":{"$id":"/properties/items/items/properties/metadata/properties/width","type":"integer","title":"The Width Schema ","default":0,"examples":[5616]},"title":{"$id":"/properties/items/items/properties/metadata/properties/title","type":"string","title":"The Title Schema ","default":"","examples":["alt1"]}}},"itemId":{"$id":"/properties/items/items/properties/itemId","type":"string","title":"The Itemid Schema ","default":"","examples":["fdc7334a437c6d0a889a7e4520b49baf"]},"url":{"$id":"/properties/items/items/properties/url","type":"string","title":"The Url Schema ","default":"","examples":["8bb438_d843f0485fcb4791b160a03e5906bd29.jpg"]},"selected":{"$id":"/properties/items/items/properties/selected","type":"boolean","title":"The Selected Schema ","default":false,"examples":[false]}}}},"styles":{"$id":"/properties/styles","type":"object","properties":{"galleryLayout":{"$id":"/properties/styles/properties/galleryLayout","type":"integer","title":"The Gallerylayout Schema ","default":0,"examples":[1]},"gallerySizeType":{"$id":"/properties/styles/properties/gallerySizeType","type":"string","title":"The Gallerysizetype Schema ","default":"","examples":["px"]},"gallerySizePx":{"$id":"/properties/styles/properties/gallerySizePx","type":["integer","string"],"title":"The Gallerysizepx Schema ","default":0,"examples":[213]},"oneRow":{"$id":"/properties/styles/properties/oneRow","type":"boolean","title":"The Onerow Schema ","default":false,"examples":[false,true]},"cubeRatio":{"$id":"/properties/styles/properties/cubeRatio","type":["number","null","string"],"title":"The Cuberatio Schema","default":0,"examples":[1]},"galleryThumbnailsAlignment":{"$id":"/properties/styles/properties/galleryThumbnailsAlignment","type":"string","title":"The Gallerythumbnailsalignment Schema ","default":"","examples":["bottom"]},"isVertical":{"$id":"/properties/styles/properties/isVertical","type":"boolean","title":"The Isvertical Schema ","default":false,"examples":[false,true]},"numberOfImagesPerRow":{"$id":"/properties/styles/properties/numberOfImagesPerRow","type":["integer","null","string"],"title":"The Numberofimagesperrow Schema ","default":0,"examples":[false]},"imageMargin":{"$id":"/properties/styles/properties/imageMargin","type":"integer","title":"The Imagemargin Schema ","default":0,"examples":[6]},"thumbnailSpacings":{"$id":"/properties/styles/properties/thumbnailSpacings","type":"number","title":"The Thumbnailspacings Schema ","default":0,"examples":[0]},"cubeType":{"$id":"/properties/styles/properties/cubeType","type":"string","title":"The Cubetype Schema ","default":"","examples":["fill"]},"enableInfiniteScroll":{"$id":"/properties/styles/properties/enableInfiniteScroll","type":["boolean","number"],"title":"The Enableinfinitescroll Schema ","default":false,"examples":[true,false]},"titlePlacement":{"$id":"/properties/styles/properties/titlePlacement","type":"string","title":"The Titleplacement Schema ","default":"","examples":["SHOW_ON_HOVER"]},"allowHover":{"$id":"/properties/styles/properties/allowHover","type":"boolean","title":"The Allowhover Schema ","default":false,"examples":[false,true]},"itemClick":{"$id":"/properties/styles/properties/itemClick","type":"string","title":"The Itemclick Schema ","default":"","examples":["link"]},"showArrows":{"$id":"/properties/styles/properties/showArrows","type":"boolean","title":"The Showarrows Schema ","default":false,"examples":[false]},"gridStyle":{"$id":"/properties/styles/properties/gridStyle","type":"integer","title":"The Gridstyle Schema ","default":0,"examples":[1]},"loveButton":{"$id":"/properties/styles/properties/loveButton","type":"boolean","title":"The Lovebutton Schema ","default":false,"examples":[false]},"allowSocial":{"$id":"/properties/styles/properties/allowSocial","type":"boolean","title":"The Allowsocial Schema ","default":false,"examples":[false]},"allowDownload":{"$id":"/properties/styles/properties/allowDownload","type":"boolean","title":"The Allowdownload Schema ","default":false,"examples":[false]},"cubeImages":{"$id":"/properties/styles/properties/cubeImages","type":"boolean","title":"The Cubeimages Schema ","default":false,"examples":[false]},"groupSize":{"$id":"/properties/styles/properties/groupSize","type":"integer","title":"The Groupsize Schema ","default":0,"examples":[1]},"groupTypes":{"$id":"/properties/styles/properties/groupTypes","type":"string","title":"The Grouptypes Schema ","default":"","examples":["1"]},"fixedColumns":{"$id":"/properties/styles/properties/fixedColumns","type":"integer","title":"The Fixedcolumns Schema ","default":0,"examples":[0]},"hasThumbnails":{"$id":"/properties/styles/properties/hasThumbnails","type":"boolean","title":"The Hasthumbnails Schema ","default":false,"examples":[false,true]},"enableScroll":{"$id":"/properties/styles/properties/enableScroll","type":"boolean","title":"The Enablescroll Schema ","default":false,"examples":[false,true]},"isGrid":{"$id":"/properties/styles/properties/isGrid","type":"boolean","title":"The Isgrid Schema ","default":false,"examples":[false,true]},"isSlider":{"$id":"/properties/styles/properties/isSlider","type":"boolean","title":"The Isslider Schema ","default":false,"examples":[false,true]},"isColumns":{"$id":"/properties/styles/properties/isColumns","type":"boolean","title":"The Iscolumns Schema ","default":false,"examples":[false,true]},"isSlideshow":{"$id":"/properties/styles/properties/isSlideshow","type":"boolean","title":"The Isslideshow Schema ","default":false,"examples":[false,true]},"cropOnlyFill":{"$id":"/properties/styles/properties/cropOnlyFill","type":"boolean","title":"The Croponlyfill Schema ","default":false,"examples":[false,true]}}},"config":{"$id":"/properties/config","type":"object","properties":{"alignment":{"$id":"/properties/config/properties/alignment","type":"string","title":"The Alignment Schema ","default":"","examples":["left"]},"size":{"$id":"/properties/config/properties/size","type":"string","title":"The Size Schema ","default":"","examples":["small"]},"layout":{"$id":"/properties/config/properties/layout","type":"string","title":"The Layout Schema ","default":"","examples":["small"]},"spacing":{"$id":"/properties/config/properties/spacing","type":"integer","title":"The Spacing Schema ","default":0,"examples":[0]},"key":{"$id":"/properties/config/properties/key","type":"string","title":"The Key Schema ","default":"","examples":["4bp6l"]}}}},"required":["items"]}')}}]);
//# sourceMappingURL=gallery-viewer.chunk.min.js.map