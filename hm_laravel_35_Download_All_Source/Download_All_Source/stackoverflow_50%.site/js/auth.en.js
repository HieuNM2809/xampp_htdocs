(()=>{var a={p:""};(()=>{"use strict";a.p=document.getElementById("webpack-public-path").innerText+"Js/"})(),StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{},window.auth={currentPage:null,pages:{SignUp:1,Login:2,AddLogin:3,Password:4},getSsrc:function(a){var e=$('#login-form input[name="ssrc"]'),t=void 0;return e&&1===e.length&&(t=e.val()),t||(t=a),t},init:function(a){auth.currentPage=a;var e=[],t=[],n=[],s=[],i=null,r=null,o=null,c=null;if($("#openid-buttons").on("click","[data-provider]",(function(e){a===auth.pages.Login&&StackExchange.using("gps",(function(){StackExchange.gps.track("login.start",{tid:StackExchange.options.user.tid},!0)}));var t=$(this).data("provider");if(t){var n=!1;a===auth.pages.SignUp&&(StackExchange.using("gps",(function(){StackExchange.gps.track("signup.start",{openid_provider:t,location:auth.getSsrc("signup_page"),tid:StackExchange.options.user.tid},!0)})),n=!0),auth.signin($(this),e,n)}})),a===auth.pages.SignUp){var u=$("#se-login-fields");$(u).on("keyup","input[name=password],input[name=display-name],input[name=email]",(function(a){var e=$(a.target);if(!e.data("entered")){var t="signup."+e.attr("name").replace("display-","")+".entered";StackExchange.using("gps",(function(){StackExchange.gps.track(t,{},!0)})),e.data("entered",!0),StackExchange.options.mustTrackSignupStartForResearchRecruitment&&!u.data("entered")&&($.ajax("/urr/signup-start"),u.data("entered",!0))}})),$("#se-login-fields").on("click","#submit-button",(function(){StackExchange.using("gps",(function(){StackExchange.gps.track("signup.se.click",{},!0)}))})),$(".js-terms").on("click","a[name=privacy],a[name=tos]",(function(a){var e="signup."+$(a.target).attr("name")+".click";StackExchange.using("gps",(function(){StackExchange.gps.track(e,{},!0)}))})),$(".js-redirects").on("click","a[name=login],a[name=talent]",(function(a){var e="signup."+$(a.target).attr("name")+"_redirect";StackExchange.using("gps",(function(){StackExchange.gps.track(e,{},!0)}))}))}var g=$('<p class="s-input-message fc-red-500"></p>').text(__tr(["Caps lock is on"], undefined, "en", [])),l=$(".js-password"),p=!1;l.keypress((function(a){var e=String.fromCharCode(a.which);if(/[a-z]/i.test(e)){var t=e==e.toUpperCase();p=t&&!a.shiftKey}var n=!1===document.msCapsLockWarningOff;p&&!n?l.after(g):g.remove()})),l.find("input").blur((function(){g.remove()}));var d=!1,h=!1;$("#login-form input").blur((function(e){a===auth.pages.SignUp&&(""==$(e.target).val()||d||(StackExchange.gps.track("signup.start",{openid_provider:"Stack Exchange",location:auth.getSsrc("signup_page"),tid:StackExchange.options.user.tid},!0),d=!0)),a===auth.pages.Login&&(""==$(e.target).val()||h||(StackExchange.gps.track("login.start",{tid:StackExchange.options.user.tid},!0),h=!0))})),$("#login-form input[type='text'], #login-form input[type='password'], #login-form input[type='email']").keypress((function(e){if(13===e.which)return $("#submit-button").is(":hidden")||a===auth.pages.AddLogin?$("#login-form").submit():$("#login-form #submit-button").click(),e.preventDefault(),!1}));var m=function(a,e){if(a.length>0){if(null!=e){for(var t=!0,n=0;n<a.length;n++)if(a[n].message==e.message){t=!1;break}a[0].changed=t}return a[0]}},f=function(a){var e,t,n;null!=a&&a.changed&&(e=a.attachTo,t=a.message,(n=e.closest(".js-auth-item")).addClass("has-error"),n.find(".js-alert-icon").removeClass("d-none"),n.find(".js-error-message").removeClass("d-none").append(t))},v=function(){f(i),f(r),f(c),f(o)},k=function(){e=[],t=[],n=[],s=[],i=null,r=null,o=null,c=null,$(".js-auth-item").removeClass("has-error"),$(".js-alert-icon").addClass("d-none"),$(".js-error-message").addClass("d-none").empty()},S=function(a,e,t){for(var n,s="all"===e,i=0;i<a.length&&(a[i].id!=e&&!s||(a.splice(i,1),s));i++);t&&((n=t.closest(".js-auth-item")).removeClass("has-error"),n.find(".js-alert-icon").addClass("d-none"),n.find(".js-error-message").addClass("d-none").empty())},b=StackExchange.Auth.addOrUpdateError,x=function(){var u,g,l,p,d;return function(e){var n=$("input[name = 'password']");if(0!==$.trim(n.val()).length||e?S(t,"pw-empty",n):b(t,{id:"pw-empty",index:0,attachTo:n,message:__tr(["Password cannot be empty."], undefined, "en", [])}),a===auth.pages.SignUp||a===auth.pages.Password){StackExchange.Auth.passwordStrengthValidation(n,t,S);var s=$.trim(n.val()),i=$('input[name="password2"]');if(i.length){var r=$.trim(i.val());0===r.length?b(t,{id:"pw-empty2",index:3,attachTo:i,message:__tr(["Password confirmation cannot be empty."], undefined, "en", [])}):S(t,"pw-empty2",i),r.length>0&&s!==r?b(t,{id:"pw-match",index:4,attachTo:i,message:__tr(["The passwords do not match."], undefined, "en", [])}):S(t,"pw-match",i)}if(StackExchange.settings.accounts.currentPasswordRequiredForChangingStackIdPassword){var o=$('input[name="currentpassword"]');o.length&&(0===$.trim(o.val()).length?b(t,{id:"curpw-empty",index:0,attachTo:o,message:__tr(["Current password cannot be empty."], undefined, "en", [])}):S(t,"curpw-empty",o))}}}(),a===auth.pages.SignUp&&(l=$.trim($("input[name='email']").val()).toUpperCase(),p=$("input[name='display-name']"),l===$.trim(p.val()).toUpperCase()&&""!=l?b(n,{id:"nm",index:0,attachTo:p,message:__tr(["Name and email address must be different. If you don't want to enter a name, just leave it blank."], undefined, "en", []),faileType:"name_email_same"}):S(n,"nm",p),u=$("#no-captcha-here iframe").length>0,g=$(".js-catpcha-error-container"),u&&(grecaptcha.getResponse().length>0?S(s,"cp",g):b(s,{id:"cp",index:0,attachTo:g,message:__tr(["CAPTCHA response required."], undefined, "en", [])}))),a!=auth.pages.Password&&(d=$("input[name='email']"),0===$.trim(d.val()).length?b(e,{id:"em-empty",index:0,attachTo:d,message:__tr(["Email cannot be empty."], undefined, "en", [])}):S(e,"em-empty",d)),i=m(e,i),r=m(t,r),o=m(n,o),c=m(s,c),null==i&&null==r&&null==o&&null==c},w=!0;$("#login-form #submit-button").click((function(t){var n={isSignup:a===auth.pages.SignUp,isLogin:a===auth.pages.Login,isPassword:a===auth.pages.Password,isAddLogin:a===auth.pages.AddLogin};return k(),$("#login-form input").each((function(a,e){var t=$(e).attr("name");t&&(t=t.replace(/(\W|_)/gi,""),n[t]=$(e).val())})),$.ajax({url:"/users/login-or-signup/validation/track",data:n,type:"POST",complete:function(){var t=x();w&&($("#login-form input").blur((function(){if(x(),a===auth.pages.SignUp){var t=$("#login-form input[name='email']"),n=$.trim(t.val());S(e,"em-ajax"),$.ajax({type:"POST",url:"/users/signup/email/validate",data:{email:n,fkey:StackExchange.options.user.fkey},success:function(n){a!==auth.pages.AddLogin&&(n.IsValid?i=null:(b(e,{id:"em-ajax",index:1,attachTo:t,message:n.ErrorMessage}),i=m(e,i)))},complete:function(){v()}})}else v()})),w=!1),t?$("#login-form").submit():v()}}),t.preventDefault(),!1})),$("#se-pw-reset").submit((function(a){k();var e=x();return e||(v(),a.preventDefault()),e}))},removeAllErrors:function(){},signin:function(a,e,t){var n,s,i=a.data?(s={name:(n=a).data("provider")},n.data("oauthserver")&&(s.oauth_server=n.data("oauthserver")),n.data("oauthversion")&&(s.oauth_version=n.attr("data-oauthversion")),s):a;function r(a,e){var t="users_login";auth.currentPage===auth.pages.SignUp&&(t="signup_page",e||StackExchange.using("gps",(function(){StackExchange.gps.track("signup.start",{openid_provider:a,location:auth.getSsrc(t),tid:StackExchange.options.user.tid},!0)})),a&&StackExchange.using("gps",(function(){StackExchange.gps.track("signup.openid.click",{openid_provider:a,location:t},!0)}))),a&&StackExchange.using("gps",(function(){StackExchange.gps.track("openid.click",{openid_provider:a,location:t},!0)}))}i&&("stack_exchange"!==i.name?(r(i.name.replace(/_/g," "),t),"2.0"===i.oauth_version&&this.setOAuthInfo(i.oauth_version,i.oauth_server),$("#login-form").submit()):r("Stack Exchange",t))},setOAuthInfo:function(a,e){$("#oauth_version").val(a),$("#oauth_server").val(e)}}})();