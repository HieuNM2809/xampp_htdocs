(()=>{var t={49158:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){e.UnitedStatesCountryCode="US",e.CanadaCountryCode="CA";e.AddressForm=class{constructor(t){this.props=t,this.countriesWithoutPostcodes=["AO","AG","AW","BS","BZ","BJ","BW","BF","BI","CM","CF","KM","CG","CD","CK","CI","DJ","DM","GQ","ER","FJ","TF","GM","GH","GD","GN","GY","HK","IE","JM","KE","KI","MO","MW","ML","MR","MU","MS","NR","AN","NU","KP","PA","QA","RW","KN","LC","ST","SA","SC","SL","SB","SO","ZA","SR","SY","TZ","TL","TK","TO","TT","TV","UG","AE","VU","YE","ZW"]}get $countryDropdown(){return $(".js-country-container select",this.props.$container)}get $stateDropdown(){return $(".js-state-container select",this.props.$container)}get $stateTextbox(){return $(".js-state-container input",this.props.$container)}get $postcodeTextbox(){return $(".js-postcode-container input",this.props.$container)}get $billingStateHiddenInput(){return $(".js-copy-state-dropdown",this.props.$container)}bind(){this.setupStateDropdown(this.props.stateLookup,this.props.onlyRequireStatesFor)}unbind(){this.$stateDropdown.off()}setupStateDropdown(e,i){const a=this.$stateTextbox.attr("name");this.$stateDropdown.on("change",(()=>{a&&(this.$stateDropdown.attr("name",a),this.$stateTextbox.removeAttr("name"))})),this.$countryDropdown.on("change",(()=>{const s=this.$countryDropdown.val(),r=e[s];let n=!1,o=!1;null===i&&r||null!==i&&i.indexOf(s)>=0?(o=!0,this.$stateDropdown.attr("name",a),this.$stateTextbox.removeAttr("name"),this.$billingStateHiddenInput.attr("name",this.$billingStateHiddenInput.data("name")),$("option:gt(0)",this.$stateDropdown).remove(),$.each(r,((t,e)=>{this.$stateDropdown.append($("<option></option>").attr("value",e.Code).text(e.Name))})),this.$stateDropdown.val("")):(n=!0,this.$stateTextbox.attr("name",a),this.$stateDropdown.removeAttr("name"),this.$billingStateHiddenInput.removeAttr("name")),this.$stateDropdown.parent().toggleClass("s-select",o),this.$stateTextbox.toggleClass("d-none",!n),this.$stateDropdown.toggleClass("d-none",!o),n?this.$stateTextbox.attr("required","true"):this.$stateTextbox.removeAttr("required").val(""),o?this.$stateDropdown.attr("required","true"):this.$stateDropdown.removeAttr("required"),this.countriesWithoutPostcodes.indexOf(s)>=0?(this.$postcodeTextbox.removeAttr("required").val(""),t.Validation.AssignStacksErrorToParent(this.$postcodeTextbox,!0)):this.$postcodeTextbox.attr("required","true"),this.props.onCountryChanged()}))}static showHideStateAndZip(t,e,i){const a=e.val(),s=i.find(".js-state-container input"),r=i.find(".js-postcode-container input"),n=i.find(".js-copy-zip");t.indexOf(a)>=0?(r.attr("name",r.data("name")),n.attr("name",n.data("name")),i.find(".js-state-zip-container").removeClass("d-none")):(s.removeAttr("name"),r.removeAttr("name"),n.removeAttr("name"),i.find(".js-state-zip-container").addClass("d-none"))}static copyShippingToBilling(t){var e=t.find(".js-copy-target input"),i=t.find(".js-tax-fields-container");e.each(((t,e)=>{const a=$(e),s=a.data("key"),r=$(`[data-key='${s}']`,i);r[0].hasAttribute("name")&&a.val(r.val())}))}}}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},19497:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){class i{constructor(e){this.createValidators=e=>{e instanceof Element&&(e=$(e));const i=e.attr("name");if(!i)return null;if(!this._props.shouldValidate(i))return null;const a=t.Validation.createValidators(e),s=e.data("type");return"credit-card"===s&&(a.creditCard=!0),"cvv"===s&&(a.cvv=!0),"month"!==s&&"year"!==s||(a.expiryDate=!0),a},this._props=e,this._validationResults={}}get $container(){return this._props.$container}getFromContainer(t){return $(t,this.$container)}get $form(){return this.$container.is("form")?this.$container:this.getFromContainer("form")}get $btnSubmit(){return this.getFromContainer(".js-submit")}get $btnBack(){return this.getFromContainer(".js-back-btn")}get $fields(){return this.getFromContainer("input,select")}get $fieldsWithMaxLength(){return this.$fields.filter("[maxlength]").not(".js-maxlength-no-message")}get $validationSummary(){return this.getFromContainer(".js-validation-summary")}get $businessSeatCountInput(){return this.getFromContainer(".js-business-seat-count")}bind(){this.$btnSubmit.click((e=>t.Util.noNavClick(e,(()=>this.onSubmit())))),this.$fields.on("focusout change",(t=>this.validateOnChange(t))),this.$fieldsWithMaxLength.on("paste keyup",(t=>this.updateCharCounters(t))),this.$businessSeatCountInput.on("focusout change",(t=>this.validateSeatCount(t)))}unbind(){this.$btnSubmit.off("click"),this.$fields.off("focusout change"),this.$fieldsWithMaxLength.off("paste keyup")}validate(e=!1){const i=this.$form.get(0),a=t.Validation.createValidatorsForForm(i,this.createValidators),s=this.serializeForm(i),r=validate(s,a,{fullMessages:!1})||{},n=Object.keys(r),o=0==n.length;for(let t in a)this._validationResults[t]=void 0===r[t];if(!e){for(let t of n)this._props.onValidationFailed(t,r[t]);const e=n.reduce(((t,e)=>t.concat($(`[name='${e}']`).get(0))),new Array);for(let i of e){const e=$(i).name,a=this.getErrorFromValidateResults(r,e);t.Validation.AssignStacksErrorToParent(i,o,a)}o||e[0].scrollIntoView()}return this._props.log(this._validationResults),o}submitInProgress(t){const e=this.$btnSubmit.data(t?"inprogress-text":"default-text");this.$btnSubmit.add(this.$btnBack).enable(!t),this.$btnSubmit.toggleClass("is-loading",t).text(e)}showValidationSummary(t,e=null){this.$validationSummary.empty();const i=e?"":"mb0";if(this.$validationSummary.append(`<p class="fs-body2 fw-bold ${i}">${t}</p>`),e){const t=$("<ul></ul>");e.forEach((e=>{t.append(`<li>${e}</li>`)})),this.$validationSummary.append(t)}this.$validationSummary.fadeIn("fast",(()=>this.$validationSummary.scrollIntoView()))}validateOnChange(e){try{const i=$(e.target),a=i.attr("name");if(!a||!this._props.shouldValidate(a))return;const s=t.Validation.IsValidationError(i),r=i.is("[type=checkbox]")?i.is(":checked"):i.val(),n={[a]:this.createValidators(i)},o=validate({[a]:r},n,{fullMessages:!1})||{},l=this._validationResults[a]=0==Object.keys(o).length;l||s||(this._props.log(this._validationResults),this._props.onValidationFailed(a,r));const c=this.getErrorFromValidateResults(o,a);t.Validation.AssignStacksErrorToParent(i,l,c)}finally{}}getErrorFromValidateResults(t,e){const i=t[e];return i instanceof Array?i[0]:i}updateCharCounters(t){const e=$(t.target),i=parseInt(e.attr("maxlength"),10),a=e.val().length,s=a>=i-20,r=e.closest(".js-validation-container"),n=r.find(".s-input-message");r.toggleClass("has-warning",s),n.text(s?`${a} / ${i}`:"")}validateSeatCount(t){const e=$(t.target),i=parseInt(e.val()),a=StackExchange.settings.subscriptions.defaultMaxTrueUpSeats,s=i<=0||i>a,r=e.closest(".js-validation-container"),n=r.find(".s-input-icon"),o=r.find(".s-input-message"),l=$('<a href="mailto:teams-support@stackoverflow.com">Contact support</a>');var c="Teams over "+a+" are available through our support team. ";i<=0&&(c="Please enter 1 or more users"),r.toggleClass("has-error",s),n.toggleClass("d-none",!s),o.text(s?c:""),i>a&&o.append(l)}hideValidationSummary(){this.$validationSummary.fadeOut("fast")}onSubmit(){this.$btnSubmit.is(":disabled")||(this._props.beforeSubmit(),this.validate()&&(this.submitInProgress(!0),this.hideValidationSummary(),this._props.performSubmit()))}hasValidationErrors(){for(let t in this._validationResults)if(this._props.shouldValidate(t)&&!this._validationResults[t])return!0;return!1}serializeForm(t){const e=validate.collectFormValues(t);for(let t in e)this._props.shouldValidate(t)||delete e[t];return e}static rebindValidators(t){t._billingForm=new i({$container:t.$form,beforeSubmit:()=>t.beforeSubmit(),performSubmit:()=>t.performSubmit(),shouldValidate:e=>t.shouldValidate(e),log:e=>t.log(e),onValidationFailed:(e,i)=>t.onValidationFailed(e,i)}),t._billingForm.validate(!0),t._billingForm.bind()}}e.BillingForm=i}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},50462:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(t){t.CreditCardForm=class{constructor(t){this.validateExpirationDate=(t,e,i,a,s)=>{const r=new Date,n=r.getMonth()+1,o=r.getFullYear(),l=parseInt(this.$expiryMonth.val(),10),c=parseInt(this.$expiryYear.val(),10),d=[];let h=!1;return isNaN(l)||isNaN(c)?h=!0:c===o&&l<n?h=this.$expiryYear.data("focused"):c<o&&(h=!0),h&&d.push(__tr(["Invalid expiration date"], undefined, "en", [])),d},this.validateCreditCard=(t,e,i,a,s)=>{const r=this._ccFormatter.getRawValue(),n=this._ccType,o=[];if(n&&"unknown"!==n&&-1!==["visa","amex","mastercard","diners","discover","jcb","dankort"].indexOf(n))if(function(t){let e=0,i=!1,a=0;for(let s=t.length-1;s>=0;s--)e=parseInt(t.charAt(s),10),i&&(e*=2)>9&&(e-=9),a+=e,i=!i;return a%10==0}(r)){let t;switch(n){case"amex":t=[15];break;case"visa":case"discover":case"jcb":case"dankort":t=[16,19];break;case"mastercard":t=[16];break;case"diners":t=[14,15,16,17,18,19]}-1===t.indexOf(r.length)&&o.push(__tr(["Invalid card number"], undefined, "en", []))}else o.push(__tr(["Invalid card number"], undefined, "en", []));else o.push(__tr(["We support Amex, Mastercard, Visa, JCB, Diners Club, Discover or Dankort"], undefined, "en", []));return o},this.validateCvv=(t,e,i,a,s)=>{const r=this._cvvFormatter.getRawValue(),n=[];return"amex"==this._ccType?4!=r.length&&n.push(__tr(["Invalid CVV"], undefined, "en", [])):3!=r.length&&n.push(__tr(["Invalid CVV"], undefined, "en", [])),n},this._props=t,this.initFormatters()}get $ccNumber(){return this.getFromContainer(".js-cc-number")}get $cvv(){return this.getFromContainer(".js-cvv")}get $expiryMonth(){return this.getFromContainer(".js-expiry-month")}get $expiryYear(){return this.getFromContainer(".js-expiry-year")}getFromContainer(t){return $(t,this._props.$container)}bind(){validate.validators.creditCard=this.validateCreditCard,validate.validators.cvv=this.validateCvv,validate.validators.expiryDate=this.validateExpirationDate;const t=(new Date).getMonth()+1;this.$expiryMonth.val(t),this.$expiryYear.focus((()=>this.$expiryYear.data("focused",!0)))}unbind(){delete validate.validators.creditCard,delete validate.validators.cvv,delete validate.validators.expiryDate,this.$expiryYear.off("focus")}initFormatters(){this._ccFormatter=new Cleave(this.$ccNumber.get(0),{creditCard:!0,onCreditCardTypeChanged:t=>{t!==this._ccType&&this._props.log(`cc type changed from [${this._ccType}] to [${t}]`),this._ccType=t}}),this._cvvFormatter=new Cleave(this.$cvv.get(0),{numeral:!0,numeralThousandsGroupStyle:"none",numeralDecimalScale:0,stripLeadingZeroes:!1})}}}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},4285:()=>{StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{}},97700:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){e.PromoWidget=class{constructor(t){this.props=t,this.$codeBackendField.attr("")}bind(){this.$txtCode.on("change keyup paste",(()=>this.$btnApplyOrRemove.prop("disabled",!this.hasUserEnteredCode))),this.props.isCreation||this.$codeBackendField.attr("name","promoCode"),this.hasUserEnteredCode&&this.validateAndApply(),this.$btnApplyOrRemove.click((e=>t.Util.noNavClick(e,(()=>this.applyOrRemove())))),this.setApplyOrRemoveButtonText()}unbind(){this.$txtCode.off("change keyup paste"),this.$btnApplyOrRemove.off("click")}get $form(){return $("#promo-form")}get $txtCode(){return $("#promo-txtCode")}get $codeBackendField(){return $("#promo-hdnVerifiedCode")}get $btnApplyOrRemove(){return $("#promo-btnApplyOrRemove")}get $verifiedDesc(){return $("#promo-verifiedDesc")}get $hdnVerifiedCode(){return $("#promo-hdnVerifiedCode")}get hasUserEnteredCode(){return $.trim(this.$txtCode.val()).length>0}get hasValidCode(){return $.trim(this.$hdnVerifiedCode.val()).length>0}applyCoupon(t){this.clear(!1),t.IsValid?(this.$form.addClass("has-success"),this.$form.find(".js-check").removeClass("d-none"),this.$hdnVerifiedCode.val(t.Code),this.$verifiedDesc.append(`<strong>${t.Name}</strong>: ${t.Description} `),this.$txtCode.prop("disabled",!0),this.log(t.Code+" applied")):(this.$form.addClass("has-error"),this.$form.find(".js-alert").removeClass("d-none"),this.$verifiedDesc.text(t.InvalidReason)),this.setApplyOrRemoveButtonText()}clear(e=!0){this.clearVerified(),this.$form.removeClass("has-error has-success"),this.$form.find(".js-check, .js-alert").addClass("d-none"),this.$txtCode.prop("disabled",!1),e&&(this.$txtCode.val("").change(),this.props.isCreation&&$.post("/teams/creation/remove-coupon",{fkey:t.Current.User.fkey})),this.setApplyOrRemoveButtonText(),this.log("cleared")}clearVerified(){this.$verifiedDesc.empty(),this.$hdnVerifiedCode.val("")}applyOrRemove(){this.hasValidCode?(this.clear(),this.$txtCode.focus()):this.validateAndApply()}setApplyOrRemoveButtonText(){let t=this.hasValidCode?"remove":"apply";this.$btnApplyOrRemove.text(this.$btnApplyOrRemove.data(t))}validateAndApply(){const e=this.$txtCode.val();if(!e)return;this.$btnApplyOrRemove.addClass("is-loading").prop("disabled",!0);const i={code:e,type:this.props.subscriptionType(),isPremium:this.props.isPremium,fkey:t.Current.User.fkey};$.ajax({type:"POST",url:this.props.isCreation?"/teams/creation/validate-coupon":"/admin/billing/plan/validate-coupon",data:i,success:t=>{this.applyCoupon(t),this.log(t)},error:(t,e,i)=>{this.log(t),this.log(e),this.log(i),this.applyCoupon({IsValid:!1,InvalidReason:__tr(["Could not retrieve Coupon status"], undefined, "en", [])})},complete:()=>{this.$btnApplyOrRemove.removeClass("is-loading").prop("disabled",!1)}})}log(e){t.Util.log("PromoWidget",e)}}}(e.Components||(e.Components={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},4631:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(i){class a extends i.WizardPageBase{constructor(t){a.IsCreation=t.IsCreation,a.IsPremium=t.IsPremium,super(t)}get pageName(){return"BillingPage"}get billingModel(){return this._model}get $form(){return $("#mainForm")}get $submit(){return $("#btnSubmit")}get $productHandle(){return $("#productHandle")}get $componentId(){return $("#componentId")}get $quantity(){return $("#quantity")}get $subscriptionType(){return $(".js-subscriptionType")}get $errorContainer(){return $(".js-validation-summary")}get $monthlyBillingBox(){return $(".js-monthly-billing-cycle")}get $annualBillingBox(){return $(".js-annual-billing-cycle")}get $businessSeatCount(){return $(".js-business-seat-count")}get $contactInfoForm(){return $("#contactInfo")}get $contactInfoCountry(){return $(".js-country-container select",this.$contactInfoForm)}init(){a.IsCreation&&window.history.replaceState({},document.title,"/teams/create/billing"),this._billingForm=new e.BillingForm({$container:this.$form,beforeSubmit:()=>this.beforeSubmit(),performSubmit:()=>this.performSubmit(),shouldValidate:t=>this.shouldValidate(t),log:t=>this.log(t),onValidationFailed:(t,e)=>this.onValidationFailed(t,e)}),this._creditCardForm=new e.CreditCardForm({$container:this.$form,log:t=>this.log(t)}),this._promoWidget=new e.Components.PromoWidget({subscriptionType:()=>this.$subscriptionType.filter(":checked").val(),isCreation:a.IsCreation,isPremium:a.IsPremium}),this._contactForm=new e.AddressForm({$container:this.$contactInfoForm,log:t=>this.log(t),onCountryChanged:()=>this._billingForm.validate(!0),onlyRequireStatesFor:[e.UnitedStatesCountryCode,e.CanadaCountryCode],stateLookup:this.billingModel.StateLookup}),this._billingForm.bind(),this._creditCardForm.bind(),this._promoWidget.bind(),this._billingForm.validate(!0),a.IsPremium&&(this.$businessSeatCount.change((t=>this.onBusinessSeatCountChanged(t))),this.onBusinessSeatCountChanged()),this.$subscriptionType.change((()=>this.onSubscriptionTypeChanged(!0))),this.onSubscriptionTypeChanged(),this._contactForm.bind();const t=[e.UnitedStatesCountryCode,e.CanadaCountryCode];this.$contactInfoCountry.on("change",(()=>{e.AddressForm.showHideStateAndZip(t,this.$contactInfoCountry,this.$contactInfoForm),e.BillingForm.rebindValidators(this)})),this.$contactInfoCountry.val()&&this.$contactInfoCountry.change(),this.$errorContainer.is(":visible")&&this.$errorContainer.scrollIntoView()}onBusinessSeatCountChanged(t=null){var e=t?$(t.target):this.$businessSeatCount,i=parseInt(e.val());i>0&&(this.$quantity.val(i),this.$businessSeatCount.val(i),this.displayTotalAmount(i))}displayTotalAmount(t){$(".js-total-amount").each(((e,i)=>{var a=$(i).data("amount-per-piece"),s=t*a;$(i).text(s.toLocaleString("en-US"))}))}onSubscriptionTypeChanged(t=!1){const e=this.$subscriptionType.filter(":checked"),i=e.val(),s=e.data("product"),r=e.data("component");this.log(`subscriptionTypeChange now ${i} (${s})`),this.$productHandle.val(s),this.$componentId.val(r);let n=!1,o=!1;switch(i){case"Annual":n=!0;break;case"Monthly":o=!0;break;default:this.log(`Cannot identify subscription type '${i}'`)}if(o?(this.$monthlyBillingBox.addClass("bc-blue-300 bs-ring"),this.$annualBillingBox.removeClass("bc-blue-300 bs-ring")):(this.$monthlyBillingBox.removeClass("bc-blue-300 bs-ring"),this.$annualBillingBox.addClass("bc-blue-300 bs-ring")),$(".js-product-annual").toggleClass("d-none",!n),$(".js-product-monthly").toggleClass("d-none",!o),t&&(this._promoWidget.hasUserEnteredCode?this._promoWidget.validateAndApply():this._promoWidget.clear()),a.IsPremium){var l=parseInt(this.$businessSeatCount.val());this.displayTotalAmount(l)}else this.displayTotalAmount(1)}shouldValidate(t){return 0!=t.length&&(!(t.indexOf("secure")>=0)&&!(t.indexOf("metafields")>=0||t.indexOf("components")>=0))}onValidationFailed(t,e){this.gpsTrackValidationError(t,e)}gpsTrackValidationError(t,e){StackExchange.using("gps",(()=>{const i={Field:$(`[name='${t}']`).data("error-field"),ErrorType:e?2:1};i.Field&&i.ErrorType&&StackExchange.gps.track("teams.create.billing.validation.error",i,!0)}))}gpsTrackCreateClick(){StackExchange.using("gps",(()=>{StackExchange.gps.track("teams.create.billing.click",{HasSameBillingAddress:!0})}))}beforeSubmit(){e.AddressForm.copyShippingToBilling(this.$contactInfoForm)}performSubmit(){a.IsCreation?(this.gpsTrackCreateClick(),this.finalCheckBeforeSubscription()):this.paymentMethodSaveStateBeforeChargifyDirect()}finalCheckBeforeSubscription(){const e="/teams/create/billing/final-check-before-subscription";$.ajax({type:"POST",url:e,data:{fkey:t.Current.User.fkey},success:t=>{if(this.log(`POST ${e} success`),t.Errors&&t.Errors.length>0){let e=t.Errors.map((t=>t.ErrorMessage));this.showSubmitErrorsInAlertBox(e),this._billingForm.submitInProgress(!1),this.$submit.disable()}else this.$form.submit()},error:(t,i,a)=>{this.log("Ajax error hitting "+e),this.log(t),this.log(i),this.log(a),this.showNonSpecificError(),this._billingForm.submitInProgress(!1)}})}paymentMethodSaveStateBeforeChargifyDirect(){const e="/admin/billing/plan/save-state-before-chargify-direct",i=(t,e="input")=>this.$contactInfoForm.find(`${e}[name="customer[${t}]"]`).val(),a={UpgradeSubscriptionType:$('input[name="subscriptionType"]:checked').val(),ContactFirstName:i("first_name"),ContactLastName:i("last_name"),OrganizationName:i("organization"),BillingEmail:i("email"),CountryCode:i("country","select"),StateCode:i("state","select"),ZipCode:i("zip"),PromoCode:this.$form.find('input[name="signup[coupon_code]"]').val()};a.fkey=t.Current.User.fkey,$.ajax({type:"POST",url:e,data:a,success:t=>{if(this.log(`POST ${e} success`),t.Errors&&t.Errors.length>0){const e=t.Errors.map((t=>t.ErrorMessage));this.showSubmitErrorsInAlertBox(e)}else this.clearInputNames(),this.$form.submit()},error:(t,i,a)=>{this.log("Ajax error hitting "+e),this.log(t),this.log(i),this.log(a),this.showNonSpecificError()},complete:()=>{this._billingForm.submitInProgress(!1)}})}showSubmitErrorsInAlertBox(t){this._billingForm.showValidationSummary(__tr(["There was a problem creating your Team:"], undefined, "en", []),t)}showNonSpecificError(){this._billingForm.showValidationSummary(__tr(["There was a error creating your Team. Please contact support."], undefined, "en", []))}clearInputNames(){this.$form.find(".js-clear-input-names *[name]").attr("name","")}}a.IsCreation=!0,a.IsPremium=!0,i.BillingPage=a}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},22368:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get $txtName(){return $("#name")}get $txtSlug(){return $("#slug")}get $chkTerms(){return $("#agreeToTerms")}get $btnSubmit(){return this.$wizardBody.find(".js-submit")}get $editSlug(){return this.$wizardBody.find(".js-edit-slug")}get pageName(){return"ChannelNamePage"}init(){this.$txtName.focus(),this.$btnSubmit.click((()=>this.submit())),this.$editSlug.on("click",(t=>{t.preventDefault(),$(".js-slug-closed, .js-slug-expanded").toggleClass("d-none")})),this.$txtName.on("keypress",(t=>{t.charCode>255&&t.preventDefault()})),this.$txtName.on("paste",(t=>{let e=t.originalEvent.clipboardData.getData("Text");e=e.replace(/[^\x00-\xFF]*/g,"").trim(),this.$txtName.val(e),t.preventDefault()})),this.$txtName.typeWatch({wait:10,captureLength:-1,highlight:!1,callback:()=>{this.transcribeNameToSlug(),this.enableSubmitWhenValid()}}),this.$txtSlug.typeWatch({wait:10,captureLength:-1,highlight:!1,callback:()=>{this.$txtSlug.data("stop-transcribing",this.$txtSlug.val()),this.enableSubmitWhenValid()}}),this.$chkTerms.on("change",(t=>{this.enableSubmitWhenValid()})),this.enableSubmitWhenValid()}enableSubmitWhenValid(){let t=this.textboxHasValue(this.$txtName)&&this.textboxHasValue(this.$txtSlug);t&&this.$chkTerms.length&&(t=this.$chkTerms.is(":checked")),this.$btnSubmit.enable(t)}transcribeNameToSlug(){if(this.$txtSlug.data("stop-transcribing"))return;const e=(this.$txtName.val()||"").replace(/^\s+/g,""),i=t.UrlUtil.friendly(e);this.$txtSlug.val(i)}submit(e){if(this._inFlightXhr)return;this.$btnSubmit.addClass("is-loading").disable();let i={ChannelName:this.$txtName.val(),Slug:this.$txtSlug.val()},a={fkey:t.Current.User.fkey,posted:i,toValidate:e?e.data("error-field"):null};this._inFlightXhr=$.ajax({type:"POST",url:"/teams/create/name/submit",data:a,dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?(this.$btnSubmit.enable(),this.showErrors(t.Errors,e)):t.RedirectUrl?window.location.href=t.RedirectUrl:window.location.replace(t.CachedData.NewChannelUrl)},error:()=>{window.location.href="/teams/create/error"},complete:()=>this.xhrComplete()})}}e.ChannelNamePage=i}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},43954:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get $formsEmail(){return $(".js-creation-email-form")}get pageName(){return"EmailPage"}init(){this.$formsEmail.submit((t=>{t.preventDefault(),this.submit(new a($(t.target)))}))}submit(e){if(this._inFlightXhr)return;let i;e.$btnSubmitAdhoc.addClass("is-loading"),e.$btnSubmitAdhoc.disable();let a=document.location.search.match(/code=([^&]*)/);a&&(i=decodeURIComponent(a[1]));let s={RawEmail:e.$txtEmail.val(),SelectedTier:e.$selectedTier.val(),PromoCode:i};this._inFlightXhr=$.ajax({type:"POST",url:"/teams/create/submit",data:{fkey:t.Current.User.fkey,posted:s,ga_client_id:e.$hidGAClientId.val(),pageName:e.$hidPageName.val(),pageUrl:e.$hidPageUrl.val()},dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?this.showErrors(t.Errors,e.$txtEmail):window.location.href=t.RedirectUrl||"/teams/create/plan"},error:()=>{window.location.href="/teams/create/error"},complete:()=>{this.xhrComplete(),e.$btnSubmitAdhoc.enable().removeClass("is-loading")}})}}e.EmailPage=i;class a{constructor(t){this._$form=t}get $txtEmail(){return this.findInForm(".js-email-input")}get $hidGAClientId(){return this.findInForm(".js-ga-clientid")}get $hidPageName(){return this.findInForm(".js-page-name")}get $hidPageUrl(){return this.findInForm(".js-page-url")}get $selectedTier(){return this.findInForm(".js-selected-tier")}get $btnSubmitAdhoc(){return this.findInForm(".js-submit-adhoc")}findInForm(t){return this._$form.find(t)}}}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},49830:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get pageName(){return"FreemiumStartPage"}init(){a.$form.submit((t=>{t.preventDefault(),this.submit()})),this.submitMissingGAClientId()}submitMissingGAClientId(){this._model&&this._model.CachedData&&this._model.CachedData.GAClientId||StackExchange.gaInitialized.then((()=>{const e=StackExchange.ga.getClientId();if(e){const i="/teams/create/free/cache-ga-client-id?clientId="+encodeURIComponent(e);$.post(i,{fkey:t.Current.User.fkey})}}))}submit(){if(this._inFlightXhr)return;a.$btnSubmit.addClass("is-loading").disable();let e={RealName:a.$txtRealName.val(),RawEmail:a.$txtEmail.val()};this._inFlightXhr=$.ajax({type:"POST",url:a.$form.attr("action"),data:{fkey:t.Current.User.fkey,posted:e},dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?this.showErrors(t.Errors):window.location.href=t.RedirectUrl},error:()=>{window.location.href="/teams/create/error"},complete:()=>{this.xhrComplete(),a.$btnSubmit.enable().removeClass("is-loading")}})}}e.FreemiumStartPage=i;class a{static get $btnSubmit(){return $("#js-submit")}static get $form(){return $("#js-creation-email-form")}static get $txtRealName(){return $("#js-real-name")}static get $txtEmail(){return $("#js-email")}}}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},315:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get $basicPlan(){return this.$wizardBody.find("#basic-plan")}get $businessPlan(){return this.$wizardBody.find("#business-plan")}get $enterprisePlan(){return this.$wizardBody.find("#enterprise-plan")}get allPlans(){return[this.$basicPlan,this.$businessPlan,this.$enterprisePlan]}get $btnSubmit(){return this.$wizardBody.find(".js-select-button")}get pageName(){return"SelectPlanPage"}init(){this.allPlans.forEach((t=>{t.click((()=>this.selectPlan(t)))})),this.$btnSubmit.click((()=>this.submit())),this.$selectedPlan=this.$wizardBody.find(".js-plan-radio:checked").closest(".js-plan"),this.$selectedPlan.length>0?(this.$btnSubmit.enable(),this.highlightPlan(this.$selectedPlan)):this.$btnSubmit.disable()}highlightPlan(t){this.allPlans.forEach((t=>t.removeClass("bs-ring bg-powder-050"))),t.addClass("bs-ring bg-powder-050")}unhighlightPlan(){this.allPlans.forEach((t=>t.removeClass("bs-ring bg-powder-050"))),this.$selectedPlan.addClass("bs-ring bg-powder-050")}selectPlan(t){this.$selectedPlan=t,t.find(".js-plan-radio").prop("checked",!0).change(),this.highlightPlan(this.$selectedPlan),this.$btnSubmit.enable()}submit(){if(this._inFlightXhr)return;this.$btnSubmit.addClass("is-loading"),this.$btnSubmit.disable();let e={SelectedTier:this.$selectedPlan.find(".js-plan-radio").val()};this._inFlightXhr=$.ajax({type:"POST",url:"/teams/create/plan/submit",data:{fkey:t.Current.User.fkey,posted:e},dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?(this.showErrors(t.Errors),this.$btnSubmit.enable()):window.location.href=t.RedirectUrl},error:()=>{window.location.href="/teams/create/error"},complete:()=>this.xhrComplete()})}}e.SelectPlanPage=i}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},25491:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get pageName(){return"ThankYouPage"}init(){this._model&&this._model.CachedData&&3==this._model.CachedData.SelectedTier&&this.createTeam()}createTeam(){this._inFlightXhr||(this._inFlightXhr=$.ajax({type:"POST",url:"/teams/create/free/finish",data:{fkey:t.Current.User.fkey},dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?this.showErrors(t.Errors):window.location.href=t.RedirectUrl},error:()=>{window.location.href="/teams/create/error"},complete:()=>{this.xhrComplete()}}))}}e.ThankYouPage=i}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},37525:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i extends e.WizardPageBase{get $emailForm(){return this.$wizardBody.find(".js-email-form")}get $editEmailLink(){return this.$wizardBody.find(".js-edit-email")}get $emailInputField(){return this.$wizardBody.find(".js-email-input")}get $btnSubmit(){return this.$wizardBody.find(".js-submit-email")}get $hidRealName(){return this.$wizardBody.find("#js-real-name")}get pageName(){return"VerifyEmailPage"}init(){this.$editEmailLink.click((t=>this.showEmailForm(t))),this.$emailForm.submit((t=>this.submit(t)))}showEmailForm(t){return t.preventDefault(),this.$emailForm.removeClass("d-none"),!1}submit(e){if(e.preventDefault(),this._inFlightXhr)return;this.$btnSubmit.addClass("is-loading"),this.$btnSubmit.disable();let i={RawEmail:this.$emailInputField.val(),RealName:this.$hidRealName.val()};this._inFlightXhr=$.ajax({type:"POST",url:this.$emailForm.attr("action"),data:{fkey:t.Current.User.fkey,posted:i},dataType:"json",success:t=>{this.clearErrors(),t.Errors&&t.Errors.length>0?(this.showErrors(t.Errors),this.$btnSubmit.enable()):window.location.href=t.RedirectUrl},error:()=>{window.location.href="/teams/create/error"},complete:()=>this.xhrComplete()})}}e.VerifyEmailPage=i}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},70054:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){!function(e){!function(e){class i{constructor(t){this._model=t,this.init(),this.showErrors(t.Errors),this.log("ready")}static ready(t){if(i.currentPage)return;let a=null;switch(t.Step){case 1:a=new e.EmailPage(t);break;case 2:a=new e.SelectPlanPage(t);break;case 3:a=new e.ChannelNamePage(t);break;case 4:a=new e.BillingPage(t);break;case 5:a=new e.VerifyEmailPage(t);break;case 9:case 11:case 10:a=new e.FreemiumStartPage(t);break;case 6:a=new e.ThankYouPage(t)}i.currentPage=a}get $wizardBody(){return $("#js-wizard-body")}log(e){t.Util.log(this.pageName,e)}xhrComplete(){this._inFlightXhr=null,this.$wizardBody.find(".is-loading").removeClass("is-loading")}textboxHasValue(t){return!!$.trim(t.val())}clearErrors(){this.$wizardBody.find(".has-error").each(((t,e)=>{let i=$(e);i.find(".js-toggle-dno-on-error").addClass("dno"),i.find(".js-error-message").html(""),i.removeClass("has-error")}))}showErrors(t,e){if(!t||!t.length)return;let i=null;e&&(i=parseInt(e.data("error-field")));for(let a=0;a<t.length;a++){let s=t[a];if(null!=i){if(i==s.ErrorField){this.showError(s,e);break}}else this.showError(s)}}showError(t,e){if(!(e=e||this.$wizardBody.find(`.js-can-error[data-error-field=${t.ErrorField}]`)).length)return void this.log(`showError unable to find field ${t.ErrorField} for message ${t.ErrorMessage}`);let i=e.closest(".js-toggle-has-error").addClass("has-error");i.find(".js-toggle-dno-on-error").removeClass("dno"),i.find(".js-error-message").html(t.ErrorMessage)}}e.WizardPageBase=i}(e.Creation||(e.Creation={}))}(t.Channels||(t.Channels={}))}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},36582:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){class e{static get Site(){return e._Site||(e._Site=new t.Site)}static get User(){return e._User||(e._User=new t.User)}static get isLoggingEnabled(){return StackExchange.options.enableLogging}}t.Current=e}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},24810:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){t.Site=class{get baseHostAddress(){return window.location.hostname}get routePrefix(){return StackExchange.options.site.routePrefix||null}urlRelative(e){if(e||(e="/"),!t.UrlUtil.needsChannelPrefix(e))return e;if(t.UrlUtil.isAbsolute(e)){const i=t.UrlUtil.parseAbsolute(e);return e.replace(i.pathname,this.routePrefix+i.pathname)}return this.routePrefix+e}}}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},13359:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){class e{static needsChannelPrefix(i){var a=t.Current.Site.routePrefix;if(!a)return!1;if(!i)return!1;if("#"===i[0]||"?"===i[0]||/^javascript\:/.test(i))return!1;var s=i,r=e.parseAbsolute(i);if(r){if(!t.Util.compareStrings(r.hostname,t.Current.Site.baseHostAddress))return!1;s=r.pathname}else s=i;return!new RegExp("^"+a).test(s)}static friendly(t){return t?t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}static isAbsolute(t){return new RegExp("^(?:[a-z]+:)?//","i").test(t)}static isQuestionUrl(t){return/https?:\/\/[\w\.:-]+(\/c\/[\w\.:-]+)?\/q(uestions)?\/\d+/i.test(t)}static looksLikeMailTo(t){return!!t&&/^mailto:[-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+$/.test(t)}static parseAbsolute(t){if(!e.isAbsolute(t))return null;var i=new RegExp(["^(https?:)?//","(([^:/?#]*)(?::([0-9]+))?)","(/{0,1}[^?#]*)","(\\?[^#]*|)","(#.*|)$"].join(""),"i"),a=t.match(i);if(!a)throw new Error("unable to parse this absolute url: "+t);var s=t=>a[t]||null;return{originalUrl:t,protocol:s(1),host:s(2),hostname:s(3),port:s(4),pathname:s(5),query:s(6),hash:s(7)}}}t.UrlUtil=e}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},4615:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){class e{get id(){return e.seOptionsUser.proxiedUserId||e.seOptionsUser.userId}get fkey(){return e.seOptionsUser.fkey}get isDeveloper(){return e.seOptionsUser&&e.seOptionsUser.isDeveloper}static get seOptionsUser(){return StackExchange&&StackExchange.options&&StackExchange.options.user?StackExchange.options.user:null}}t.User=e}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},11164:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){t.nameof=t=>t;class e{static arrayEquals(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}static arrayEqualsIgnoreOrder(t,i){if(null==t||null==i)return!1;const a=t.slice(0),s=i.slice(0);return a.sort(),s.sort(),e.arrayEquals(a,s)}static compareStrings(t,e,i=!0,a=!1){return!(!t||!e)&&(i&&(a?(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()):(t=t.toLowerCase(),e=e.toLowerCase())),t===e)}static groupBy(t,e){let i=[],a={};return t.forEach((t=>{let s=e(t),r=a[s];r||(r={key:s,items:[]},a[s]=r,i.push(r)),r.items.push(t)})),i}static htmlEncode(t){return $("<div/>").text(t).html().replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static isInDOM(t){return t&&$.contains(document.documentElement,t instanceof $?t[0]:t)}static log(e,i){t.Current.isLoggingEnabled&&(console.log(`${e}: ${i}`),"string"!=typeof i&&console.log(i))}static noNavClick(t,e){return t.preventDefault(),e(),!1}static buildPopup(t){let e=__tr(["close this popup (or hit Esc)"], undefined, "en", []),i=$(`\n<div class="popup ${t.popupCssClasses}">\n    <div class="popup-close"><a title="${e}">&times;</a></div>\n    <h2 class="handle">${t.headerText}</h2>\n    <div class="popup-body"></div>\n    <div class="popup-footer"></div>\n</div>`);return i.find(".popup-body").append(t.popupBody),i}static showError(t){if(!t||!t.$target||!t.$target.length)throw new Error("opts.$target is required");let e=null;t.xhr&&(e=StackExchange.helpers.getLikelyErrorMessage(t.xhr)),!e&&t.msg&&(e=t.msg),t.$target.showErrorMessage(e||__tr(["An error has occurred - please try your action again."], undefined, "en", []))}static initModal(t){const i="initModal";t.data(i)||($(".js-modal-close").click((i=>{e.toggleModal(t,!1)})).find(".js-modal-dialog").click((t=>{t.preventDefault(),t.stopPropagation()})),$(document).keydown((i=>{27==i.which&&e.toggleModal(t,!1)})),t.data(i,!0))}static toggleModal(t,e){$("body").attr({"aria-hidden":e?"true":"false",tabindex:e?"-1":"0"}),t.attr({"aria-hidden":e?"false":"true",tabindex:e?"0":"1"})}}t.Util=e}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})},55288:()=>{StackExchange=window.StackExchange=window.StackExchange||{},function(t){!function(t){class e{static createValidatorsForForm(t,i=e.createValidators){const a={};return $("input,select",t).each((function(){if(this.name){const t=this.name.replace(".","\\\\."),e=i(this);e&&(a[t]=e)}})),a}static createValidators(t){const e=this.coerceTo$(t),i={};return e.is("[required]")&&(i.presence={message:__tr(["This field is required"], undefined, "en", []),allowEmpty:!1},e.is("[type=checkbox]")&&(i.inclusion={within:[!0,"true","True"],message:__tr(["This field is required"], undefined, "en", [])})),e.is("[type=email]")&&(i.email={message:__tr(["This does not look like a valid email address"], undefined, "en", [])}),$.isEmptyObject(i)?null:i}static IsValidationError(t,e="has-error"){return this.coerceTo$(t).closest(".js-validation-container").hasClass(e)}static ClearValidationError(t,e="has-error"){const i=this.coerceTo$(t);i.closest(".js-validation-container").removeClass(e),i.siblings(".js-svg-error").addClass("d-none")}static AssignStacksErrorToParent(t,e,i="",a="has-error"){let s=this.coerceTo$(t);const r=s.closest(".js-validation-container"),n=r.find(".s-input-message");r.toggleClass(a,!e),i?n.text(e?"":i):n.text("");const o=s.data("stacks-validation-group");o&&(s=s.add(r.find(`[data-stacks-validation-group="${o}"]`).not(s))),s.each(((t,i)=>function(t){t.is("select")&&t.closest(".s-select").toggleClass(a,!e);t.siblings(".js-svg-error").toggleClass("d-none",e)}($(i))))}static coerceTo$(t){return t instanceof Element?$(t):t}}t.Validation=e}(t.Scripts||(t.Scripts={}))}((window.StackOverflow=window.StackOverflow||{})||{})}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,i),r.exports}i.p="",(()=>{"use strict";i.p=document.getElementById("webpack-public-path").innerText+"Js/"})(),(()=>{"use strict";i(36582),i(24810),i(13359),i(4615),i(11164),i(55288);StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{};i(49158),i(19497),i(50462),i(4285),i(97700);StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{};i(70054),i(4631),i(22368),i(43954),i(49830),i(315),i(25491),i(37525);StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{}})()})();